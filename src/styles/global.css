/* 全局样式入口：集中定义字体、窗口壳与主题变量，并对第三方组件做必要覆盖。 */
@import "./animations.css";
@tailwind base;
@tailwind components;
@tailwind utilities;

@font-face {
  font-family: "Be Vietnam Pro";
  font-style: normal;
  font-weight: 300;
  font-display: swap;
  src: url("../assets/fonts/BeVietnamPro-300.woff2") format("woff2");
}

@font-face {
  font-family: "Be Vietnam Pro";
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url("../assets/fonts/BeVietnamPro-400.woff2") format("woff2");
}

@font-face {
  font-family: "Be Vietnam Pro";
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url("../assets/fonts/BeVietnamPro-500.woff2") format("woff2");
}

@font-face {
  font-family: "Be Vietnam Pro";
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url("../assets/fonts/BeVietnamPro-600.woff2") format("woff2");
}

@font-face {
  font-family: "Be Vietnam Pro";
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url("../assets/fonts/BeVietnamPro-700.woff2") format("woff2");
}

@font-face {
  font-family: "Material Symbols Outlined";
  font-style: normal;
  font-weight: 100 700;
  font-display: swap;
  src: url("../assets/fonts/MaterialSymbolsOutlined.woff2") format("woff2");
}

.material-symbols-outlined {
  font-family: "Material Symbols Outlined";
  font-weight: normal;
  font-style: normal;
  font-size: 24px;
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: "liga";
  -webkit-font-smoothing: antialiased;
  font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 24;
}

body {
  -webkit-user-select: none;
  user-select: none;
  cursor: default;
}

.member-avatar-button,
.member-avatar-button:focus,
.member-avatar-button:focus-visible,
.member-avatar-button:active {
  outline: none;
  box-shadow: none;
  border: 0;
  background: transparent;
  padding: 0;
}

html,
body,
#app {
  height: 100%;
  background: transparent;
}

html {
  overflow: hidden;
  overscroll-behavior: none;
}

#app {
  width: 100%;
}

.xterm {
  overflow: hidden;
}

.xterm .xterm-scrollable-element {
  overflow-x: hidden;
}

.xterm-viewport {
  overflow-x: hidden !important;
}

.xterm .xterm-helpers {
  left: 0;
  right: 0;
  width: 100%;
}

/* xterm 依赖隐藏 textarea 处理输入与 IME，此处压缩尺寸避免布局干扰。 */
.xterm .xterm-helper-textarea {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  max-width: 1px !important;
  max-height: 1px !important;
  overflow: hidden !important;
  padding: 0 !important;
  border: 0 !important;
  margin: 0 !important;
  opacity: 0 !important;
  z-index: -1;
}

.xterm .composition-view {
  max-width: 100% !important;
  box-sizing: border-box !important;
  overflow: hidden;
  text-overflow: clip;
}

.xterm .xterm-screen {
  overflow: hidden;
}

.window-frame {
  display: flex;
  flex-direction: column;
  height: 100%;
  border-radius: 12px;
  overflow: hidden;
  border: 0;
  background-color: rgb(var(--color-background));
  background-image: var(--app-gradient), var(--app-gradient-spot);
  background-repeat: no-repeat;
  background-size: cover;
  box-shadow: var(--window-glow);
}

.window-frame--max {
  border-radius: 0;
  border-color: transparent;
  box-shadow: none;
}

.window-frame--inactive {
  box-shadow: var(--window-glow-inactive);
}

.window-body {
  flex: 1;
  min-height: 0;
}

.titlebar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 40px;
  padding: 0 10px 0 14px;
  background: rgb(var(--color-panel) / 0.5);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

.titlebar--mac {
  padding-left: 82px;
}

.titlebar--workspace {
  background: transparent;
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.titlebar__left {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.titlebar__title {
  font-size: 12px;
  font-weight: 600;
  color: rgb(var(--color-text) / 0.7);
  letter-spacing: 0.04em;
  text-transform: uppercase;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.titlebar__controls {
  display: flex;
  align-items: center;
  gap: 2px;
}

.titlebar__btn {
  width: 46px;
  height: 30px;
  border-radius: 6px;
  border: 0;
  background: transparent;
  color: rgb(var(--color-text) / 0.6);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: background 120ms ease, color 120ms ease;
}

.titlebar__btn svg {
  width: 10px;
  height: 10px;
}

.titlebar__btn:hover {
  background: rgb(var(--color-overlay) / 0.12);
  color: rgb(var(--color-text) / 0.9);
}

.titlebar__btn:active {
  background: rgb(var(--color-overlay) / 0.2);
}

.titlebar__btn--close:hover {
  background: rgb(239 68 68 / 0.85);
  color: #fff;
}

.window-frame--hover-stale .titlebar__btn:hover {
  background: transparent;
  color: rgb(var(--color-text) / 0.6);
}

.window-frame--hover-stale .titlebar__btn--close:hover {
  background: transparent;
  color: rgb(var(--color-text) / 0.6);
}

.window-frame--inactive .titlebar {
}

.window-frame--inactive .titlebar__title {
  color: rgb(var(--color-text) / 0.45);
}

.window-frame--inactive .titlebar__btn {
  color: rgb(var(--color-text) / 0.45);
}

.selectable,
.allow-select,
.prose {
  -webkit-user-select: text;
  user-select: text;
  cursor: text;
}

input,
textarea,
[contenteditable='true'] {
  -webkit-user-select: text;
  user-select: text;
  cursor: text;
}

.custom-scrollbar::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: rgb(var(--scrollbar-thumb));
  border-radius: 3px;
}

.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: rgb(var(--scrollbar-thumb-hover));
}

.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: rgb(var(--scrollbar-thumb)) transparent;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
/* 主题变量基线：作为暗色默认值，供运行时主题切换与 utility 类使用。 */
:root {
  --color-background: 15 15 18;
  --color-surface: 24 24 27;
  --color-panel: 18 18 21;
  --color-panel-strong: 20 20 23;
  --color-panel-soft: 30 30 36;
  --color-text: 248 250 252;
  --color-text-muted: 148 163 184;
  --color-border: 255 255 255;
  --color-overlay: 255 255 255;
  --color-primary: 56 189 248;
  --color-primary-hover: 14 165 233;
  --color-secondary: 100 116 139;
  --scrollbar-thumb: 51 65 85;
  --scrollbar-thumb-hover: 71 85 105;
  --shadow-modal: 0 25px 50px -12px rgb(0 0 0 / 0.5);
  --app-gradient: radial-gradient(1200px circle at top right, rgb(var(--color-primary) / 0.18), rgb(var(--color-background)) 55%, rgb(5 5 5) 100%);
  --app-gradient-spot: radial-gradient(900px circle at 20% 20%, rgb(var(--color-primary) / 0.12), transparent 60%);
  --skill-modal-gradient: radial-gradient(720px circle at 12% 8%, rgb(var(--color-primary) / 0.16), transparent 58%),
    linear-gradient(155deg, rgb(var(--color-panel) / 0.95), rgb(var(--color-panel-strong) / 0.9) 55%, rgb(var(--color-background) / 0.85) 100%);
  --skill-card-gradient: linear-gradient(
    160deg,
    rgb(var(--color-panel) / 0.88),
    rgb(var(--color-panel-strong) / 0.78) 52%,
    rgb(var(--color-background) / 0.72) 100%
  );
  --skill-card-accent: linear-gradient(120deg, rgb(var(--color-overlay) / 0.05), transparent 45%);
  --window-glow: none;
  --window-glow-inactive: none;
  --z-context-menu: 2000;
  color-scheme: dark;
}

:root[data-theme='light'] {
  --color-background: 248 250 253;
  --color-surface: 255 255 255;
  --color-panel: 240 244 249;
  --color-panel-strong: 233 238 246;
  --color-panel-soft: 255 255 255;
  --color-text: 31 31 31;
  --color-text-muted: 68 71 70;
  --color-border: 116 119 117;
  --color-overlay: 31 31 31;
  --color-primary: 11 87 208;
  --color-primary-hover: 10 79 184;
  --color-secondary: 0 99 155;
  --scrollbar-thumb: 196 199 197;
  --scrollbar-thumb-hover: 116 119 117;
  --shadow-modal: 0 25px 50px -12px rgb(15 23 42 / 0.16);
  --app-gradient: radial-gradient(1200px circle at top right, rgb(var(--color-primary) / 0.12), rgb(var(--color-background)) 45%, rgb(var(--color-panel)) 100%);
  --app-gradient-spot: radial-gradient(800px circle at 20% 15%, rgb(194 231 255 / 0.45), transparent 60%);
  --skill-modal-gradient: radial-gradient(720px circle at 12% 8%, rgb(var(--color-primary) / 0.08), transparent 58%),
    linear-gradient(155deg, rgb(var(--color-panel) / 0.95), rgb(var(--color-panel-strong) / 0.88) 55%, rgb(var(--color-surface) / 0.9) 100%);
  --skill-card-gradient: linear-gradient(
    160deg,
    rgb(var(--color-panel) / 0.98),
    rgb(var(--color-panel-strong) / 0.92) 52%,
    rgb(var(--color-surface) / 0.96) 100%
  );
  --skill-card-accent: linear-gradient(120deg, rgb(var(--color-overlay) / 0.04), transparent 45%);
  --window-glow: none;
  --window-glow-inactive: none;
  color-scheme: light;
}

:root[data-theme='system'] {
  color-scheme: dark;
}

@media (prefers-color-scheme: light) {
  :root[data-theme='system'] {
    --color-background: 248 250 253;
    --color-surface: 255 255 255;
    --color-panel: 240 244 249;
    --color-panel-strong: 233 238 246;
    --color-panel-soft: 255 255 255;
    --color-text: 31 31 31;
    --color-text-muted: 68 71 70;
    --color-border: 116 119 117;
    --color-overlay: 31 31 31;
    --color-primary: 11 87 208;
    --color-primary-hover: 10 79 184;
    --color-secondary: 0 99 155;
    --scrollbar-thumb: 196 199 197;
    --scrollbar-thumb-hover: 116 119 117;
    --shadow-modal: 0 25px 50px -12px rgb(15 23 42 / 0.16);
    --app-gradient: radial-gradient(1200px circle at top right, rgb(var(--color-primary) / 0.12), rgb(var(--color-background)) 45%, rgb(var(--color-panel)) 100%);
    --app-gradient-spot: radial-gradient(800px circle at 20% 15%, rgb(194 231 255 / 0.45), transparent 60%);
    --skill-modal-gradient: radial-gradient(720px circle at 12% 8%, rgb(var(--color-primary) / 0.08), transparent 58%),
      linear-gradient(155deg, rgb(var(--color-panel) / 0.95), rgb(var(--color-panel-strong) / 0.88) 55%, rgb(var(--color-surface) / 0.9) 100%);
    --skill-card-gradient: linear-gradient(
      160deg,
      rgb(var(--color-panel) / 0.98),
      rgb(var(--color-panel-strong) / 0.92) 52%,
      rgb(var(--color-surface) / 0.96) 100%
    );
    --skill-card-accent: linear-gradient(120deg, rgb(var(--color-overlay) / 0.04), transparent 45%);
    color-scheme: light;
  }
}

.app-shell {
  background: transparent;
}

.skill-modal {
  background-color: rgb(var(--color-panel-strong) / 0.95);
  background-image: var(--skill-modal-gradient);
  background-repeat: no-repeat;
  background-size: cover;
}

.skill-card {
  background-color: rgb(var(--color-panel) / 0.7);
  background-image: var(--skill-card-gradient);
  background-repeat: no-repeat;
  background-size: cover;
  isolation: isolate;
}

.skill-card-accent {
  position: absolute;
  inset: 0;
  background-image: var(--skill-card-accent);
  border-radius: inherit;
  opacity: 0.45;
  pointer-events: none;
  z-index: 0;
}

.skill-card > *:not(.skill-card-accent) {
  position: relative;
  z-index: 1;
}

/* light 主题下覆盖若干 utility 颜色，保持 UI 语义一致。 */
:root[data-resolved-theme='light'] .message-bubble--me {
  background-color: rgb(var(--color-panel-strong)) !important;
  border: 1px solid rgb(var(--color-border) / 0.35);
  color: rgb(var(--color-text)) !important;
}

.text-on-primary {
  color: #fff !important;
}

.hover\:text-on-primary:hover {
  color: #fff !important;
}

.group:hover .group-hover\:text-on-primary {
  color: #fff !important;
}

:root[data-resolved-theme='light'] .text-white {
  color: rgb(var(--color-text) / 1) !important;
}

:root[data-resolved-theme='light'] .text-white\/90 {
  color: rgb(var(--color-text) / 0.9) !important;
}

:root[data-resolved-theme='light'] .text-white\/80 {
  color: rgb(var(--color-text) / 0.8) !important;
}

:root[data-resolved-theme='light'] .text-white\/70 {
  color: rgb(var(--color-text) / 0.7) !important;
}

:root[data-resolved-theme='light'] .text-white\/60 {
  color: rgb(var(--color-text) / 0.6) !important;
}

:root[data-resolved-theme='light'] .text-white\/50 {
  color: rgb(var(--color-text) / 0.5) !important;
}

:root[data-resolved-theme='light'] .text-white\/40 {
  color: rgb(var(--color-text) / 0.4) !important;
}

:root[data-resolved-theme='light'] .text-white\/30 {
  color: rgb(var(--color-text) / 0.3) !important;
}

:root[data-resolved-theme='light'] .text-white\/20 {
  color: rgb(var(--color-text) / 0.2) !important;
}

:root[data-resolved-theme='light'] .placeholder-white\/30::placeholder {
  color: rgb(var(--color-text) / 0.3) !important;
}

:root[data-resolved-theme='light'] .placeholder-white\/20::placeholder {
  color: rgb(var(--color-text) / 0.2) !important;
}

:root[data-resolved-theme='light'] .bg-white\/20 {
  background-color: rgb(var(--color-overlay) / 0.2) !important;
}

:root[data-resolved-theme='light'] .bg-white\/15 {
  background-color: rgb(var(--color-overlay) / 0.15) !important;
}

:root[data-resolved-theme='light'] .bg-white\/10 {
  background-color: rgb(var(--color-overlay) / 0.1) !important;
}

:root[data-resolved-theme='light'] .bg-white\/5 {
  background-color: rgb(var(--color-overlay) / 0.05) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.02\] {
  background-color: rgb(var(--color-overlay) / 0.02) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.03\] {
  background-color: rgb(var(--color-overlay) / 0.03) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.04\] {
  background-color: rgb(var(--color-overlay) / 0.04) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.05\] {
  background-color: rgb(var(--color-overlay) / 0.05) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.12\] {
  background-color: rgb(var(--color-overlay) / 0.12) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.16\] {
  background-color: rgb(var(--color-overlay) / 0.16) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.06\] {
  background-color: rgb(var(--color-overlay) / 0.06) !important;
}

:root[data-resolved-theme='light'] .bg-white\/\[0\.07\] {
  background-color: rgb(var(--color-overlay) / 0.07) !important;
}

:root[data-resolved-theme='light'] .hover\:bg-white\/15:hover {
  background-color: rgb(var(--color-overlay) / 0.15) !important;
}

:root[data-resolved-theme='light'] .hover\:bg-white\/\[0\.16\]:hover {
  background-color: rgb(var(--color-overlay) / 0.16) !important;
}

:root[data-resolved-theme='light'] .border-white\/20 {
  border-color: rgb(var(--color-border) / 0.45) !important;
}

:root[data-resolved-theme='light'] .border-white\/10 {
  border-color: rgb(var(--color-border) / 0.3) !important;
}

:root[data-resolved-theme='light'] .border-white\/5 {
  border-color: rgb(var(--color-border) / 0.2) !important;
}

:root[data-resolved-theme='light'] .ring-white\/20 {
  --tw-ring-color: rgb(var(--color-border) / 0.45) !important;
}

:root[data-resolved-theme='light'] .ring-white\/10 {
  --tw-ring-color: rgb(var(--color-border) / 0.3) !important;
}

:root[data-resolved-theme='light'] .ring-white\/5 {
  --tw-ring-color: rgb(var(--color-border) / 0.2) !important;
}

.settings-select {
  appearance: base-select;
  width: 100%;
  border-radius: 0.75rem;
  border: 1px solid rgb(var(--color-border) / 0.1);
  background: linear-gradient(135deg, rgb(var(--color-background)) 0%, rgb(var(--color-panel)) 100%);
  color: rgb(var(--color-text));
  color-scheme: dark;
  font-size: 0.875rem;
  line-height: 1.25rem;
  padding: 0.625rem 2.5rem 0.625rem 1rem;
}

.settings-select:focus-visible {
  outline: none;
  border-color: rgb(var(--color-primary) / 0.5);
  box-shadow: 0 0 0 1px rgb(var(--color-primary) / 0.5);
}

.settings-select:open {
  border-color: rgb(var(--color-primary) / 0.4);
  box-shadow: 0 0 0 1px rgb(var(--color-primary) / 0.35);
}

.settings-select::picker(select) {
  background: linear-gradient(135deg, rgb(var(--color-background)) 0%, rgb(var(--color-panel-strong)) 100%);
  border: 1px solid rgb(var(--color-border) / 0.1);
  border-radius: 0.75rem;
  padding: 0.25rem;
  box-shadow: var(--shadow-modal);
  color: rgb(var(--color-text));
}

.settings-select option {
  padding: 0.5rem 0.75rem;
  color: rgb(var(--color-text));
  background: rgb(var(--color-background));
}

.settings-select option:hover,
.settings-select option:focus-visible {
  background: rgb(var(--color-text-muted) / 0.55);
  color: rgb(var(--color-background));
}

.settings-select option:checked {
  background: rgb(255 255 255 / 0.35);
  color: rgb(var(--color-background));
  font-weight: 600;
}

.settings-select option::checkmark {
  color: rgb(var(--color-background));
}

.settings-select::picker-icon {
  color: rgb(var(--color-text) / 0.6);
}

:root[data-resolved-theme='light'] .settings-select {
  color-scheme: light;
}

:root[data-resolved-theme='light'] .settings-select option:hover,
:root[data-resolved-theme='light'] .settings-select option:focus-visible,
:root[data-resolved-theme='light'] .settings-select option:checked {
  background: rgb(var(--color-panel-strong));
  color: rgb(var(--color-text));
}

:root[data-resolved-theme='light'] .settings-select option::checkmark {
  color: rgb(var(--color-text));
}
